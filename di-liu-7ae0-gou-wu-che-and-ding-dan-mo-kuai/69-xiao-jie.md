[![](https://iocaffcdn.phphub.org/uploads/images/201806/13/1/w1xACbW7ir.jpeg?imageView2/2/w/1240/h/0 "file")](https://iocaffcdn.phphub.org/uploads/images/201806/13/1/w1xACbW7ir.jpeg?imageView2/2/w/1240/h/0)

## 总结

经过本章节的学习，我们学到了以下内容：

* 购物车的数据库结构设计；
* 使用闭包来校验用户输入；
* 完成了将商品加入购物的功能；
* 订单流水号的生成；
* 创建订单时应保存用户收货地址的快照而非 ID；
* 代表状态的值应使用常量；
* 在 Laravel 中使用数据库事务的正确姿势；
* 高并发下减商品库存的正确姿势；
* 使用延迟队列自动关闭未支付订单；
* 完成了用户端订单列表的展示；
* 了解了使用预加载与延迟预加载解决数据库 N + 1 问题；
* 完成了用户端订单详情页的展示；
* 使用 Service 模式对业务代码的封装来提高代码的复用性。

这一章的知识量比较大，涉及到电商技术难点『超卖』、『事务』、『库存』等概念，不适应的同学可以多温习几遍这一节的知识点，尝试做一个脑图或者流程图缕缕思维。下一章里，我们将一起开发电商产品含金量最高的功能模块 —— 支付。

